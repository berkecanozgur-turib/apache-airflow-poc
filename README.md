# Airflow Scheduler Project

## Overview
This project integrates Apache Airflow with a Spring Boot application to orchestrate and schedule service calls. It uses Docker Compose to manage dependencies such as PostgreSQL, Airflow, and the Spring application.

## Folder Structure
- `dags/` - Contains Airflow DAG definitions and related scripts.
- `src/` - Java source code for the Spring Boot application.
- `target/` - Compiled Java classes and build artifacts.
- `logs/` - Log files generated by Airflow and the application.
- `plugins/` - Custom Airflow plugins (if any).
- `Dockerfile` - Docker build instructions for the Spring Boot app.
- `docker-compose.yml` - Docker Compose configuration for the stack.
- `README.md` - Project documentation.

## Technology Stack
- Java (Spring Boot)
- Apache Airflow
- Docker & Docker Compose
- PostgreSQL

---

# build spring application 
cd .
docker build -t turib-airflow-scheduler .

# run docker applications (postgresql, airflow, spring-app)
cd ./dags
docker-compose up --build -d 
# (alternative: docker-compose up --build -d)

# grant user on airflow web server
docker-compose run airflow-webserver airflow users create --username admin --firstname Admin --lastname User --role Admin --email admin@example.com --password admin

# add records to spring-app to scheduled endpoints
curl --location 'http://localhost:8081/api/endpoints' \
--header 'Content-Type: application/json' \
--data '{
  "url": "https://jsonplaceholder.typicode.com/todos/2"
}'

# check records saved successfully.
curl --location 'http://localhost:8081/api/endpoints'


# on ui: http://localhost:8080/
0- go to DAGs page. 
1- click unpause/pause dag button. and activate dag.
2- select "run"s sections data.
3- select Dag ID.
4- click task_id named call_all_endpoints
5- click logs.
6- check output, result of scheduled service result.
